<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | ECO-TRONICS 2026</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Outfit:wght@300;400;600&family=Syncopate:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        :root {
            --card-bg: rgba(11, 15, 20, 0.6);
            --table-row-hover: rgba(0, 255, 136, 0.05);
        }

        body {
            overflow-y: auto;
        }

        .admin-container {
            padding: 120px 20px 60px;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        /* Stats Section */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            border-color: var(--neon-green);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.1);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--neon-green);
            opacity: 0.5;
        }

        .stat-label {
            font-family: var(--font-sub);
            font-size: 0.65rem;
            color: var(--text-white);
            opacity: 0.7;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 15px;
            display: block;
        }

        .stat-value {
            font-family: var(--font-heading);
            font-size: 2.5rem;
            color: var(--neon-green);
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
        }

        /* Controls Section */
        .controls-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .filter-select {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: var(--text-white);
            padding: 10px 20px;
            border-radius: 6px;
            font-family: var(--font-body);
            outline: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-select:focus {
            border-color: var(--neon-green);
        }

        /* Table Section */
        .table-wrapper {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            overflow-x: auto;
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-family: var(--font-body);
            font-size: 0.9rem;
        }

        th {
            background: rgba(255, 255, 255, 0.05);
            text-align: left;
            padding: 20px;
            font-family: var(--font-sub);
            font-size: 0.7rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--neon-green);
            border-bottom: 1px solid var(--glass-border);
        }

        td {
            padding: 18px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.9);
        }

        tr:hover td {
            background: var(--table-row-hover);
        }

        .btn-link {
            color: var(--neon-green);
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
        }

        .btn-link:hover {
            text-decoration: underline;
            text-shadow: 0 0 10px var(--neon-green);
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .page-btn {
            background: transparent;
            border: 1px solid var(--glass-border);
            color: var(--text-white);
            padding: 8px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-family: var(--font-sub);
            font-size: 0.65rem;
            letter-spacing: 1px;
            transition: var(--transition);
        }

        .page-btn:hover:not(:disabled) {
            border-color: var(--neon-green);
            color: var(--neon-green);
        }

        .page-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        #page-info {
            font-family: var(--font-sub);
            font-size: 0.7rem;
            opacity: 0.7;
        }

        /* Password Modal */
        #auth-overlay {
            position: fixed;
            inset: 0;
            background: var(--bg-black);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .auth-card {
            background: rgba(11, 15, 20, 0.95);
            border: 1px solid var(--neon-green);
            padding: 40px;
            border-radius: 12px;
            text-align: center;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 0 50px rgba(0, 255, 136, 0.2);
        }

        .auth-card h2 {
            font-family: var(--font-heading);
            color: var(--neon-green);
            margin-bottom: 25px;
            letter-spacing: 3px;
        }

        #admin-password {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            color: var(--text-white);
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.2rem;
            letter-spacing: 5px;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--deep-emerald);
            border: 1px solid var(--neon-green);
            color: var(--text-white);
            padding: 15px 25px;
            border-radius: 8px;
            font-family: var(--font-body);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1001;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .toast.active {
            opacity: 1;
            transform: translateX(0);
        }

        .toast-icon {
            font-size: 1.2rem;
        }

        @media (max-width: 768px) {
            .controls-bar {
                flex-direction: column;
                align-items: flex-start;
            }

            .filter-group {
                width: 100%;
            }

            .filter-select {
                flex: 1;
            }
        }
    </style>
</head>

<body class="loading">
    <div class="custom-cursor"></div>
    <div class="cursor-glow"></div>
    <div class="bg-grid"></div>
    <div class="bg-glow"></div>
    <div class="global-bg-robo"></div>
    <canvas id="neural-canvas"></canvas>

    <!-- Navigation -->
    <nav class="navbar scrolled">
        <div class="nav-container">
            <div class="nav-left-logos">
                <a href="index.html"><img src="srm-logo.png" alt="SRM" class="nav-srm-logo"></a>
            </div>
            <div class="nav-right-block">
                <span class="eco-brand"><span class="eco">ADMIN</span>-<span class="tronics">DASHBOARD</span></span>
            </div>
        </div>
    </nav>

    <!-- Password Protection Overlay -->
    <div id="auth-overlay">
        <div class="auth-card">
            <h2>ACCESS_DENIED</h2>
            <p style="opacity: 0.7; font-size: 0.8rem; margin-bottom: 25px;">Enter admin credentials to synchronize.</p>
            <input type="password" id="admin-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
            <button id="auth-btn" class="btn btn-glow" style="width: 100%;">VALIDATE_ACCESS</button>
            <p id="auth-error" style="color: #ff3e3e; font-size: 0.7rem; margin-top: 15px; display: none;">
                INVALID_KEY_SEQUENCE</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="admin-container">
        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-label">TOTAL_REGISTRATIONS</span>
                <span class="stat-value" id="total-count">00</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">HEALTH_TECH</span>
                <span class="stat-value" id="health-count">00</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">URBAN_INTEL</span>
                <span class="stat-value" id="urban-count">00</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">CLIMATE_ACTION</span>
                <span class="stat-value" id="climate-count">00</span>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls-bar">
            <div class="filter-group">
                <label
                    style="font-family: var(--font-sub); font-size: 0.6rem; opacity: 0.7; letter-spacing: 2px;">FILTER_BY_TRACK:</label>
                <select id="track-filter" class="filter-select">
                    <option value="All">All Tracks</option>
                    <option value="Health Tech">Health Tech</option>
                    <option value="Urban Intelligence">Urban Intelligence</option>
                    <option value="Climate Action">Climate Action</option>
                    <option value="Eco Tech">Eco Tech</option>
                    <option value="EdTech">EdTech</option>
                    <option value="Clean Energy">Clean Energy</option>
                </select>
            </div>
            <button id="refresh-btn" class="page-btn">æ‰‹åŠ¨åˆ·æ–°_REFRESH</button>
        </div>

        <!-- Table -->
        <div class="table-wrapper">
            <table id="registrations-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>TEAM_NAME</th>
                        <th>TRACK</th>
                        <th>LEADER_NAME</th>
                        <th>EMAIL</th>
                        <th>BLUEPRINT</th>
                        <th>PAYMENT</th>
                        <th>SUBMITTED_AT</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- Rows will be injected here -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination">
            <button id="prev-page" class="page-btn" disabled>
                < PREV</button>
                    <span id="page-info">PAGE 01</span>
                    <button id="next-page" class="page-btn">NEXT ></button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span class="toast-icon">ðŸš€</span>
        <span id="toast-message">New registration received!</span>
    </div>

    <script src="admin.js"></script>
    <script>
        // Design Logic (Simple Cursor/BG)
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => document.body.classList.remove('loading'), 300);

            const cursor = document.querySelector('.custom-cursor');
            const cursorGlow = document.querySelector('.cursor-glow');
            if (cursor && cursorGlow) {
                document.addEventListener('mousemove', (e) => {
                    gsap.to(cursor, { x: e.clientX, y: e.clientY, duration: 0.1 });
                    gsap.to(cursorGlow, { x: e.clientX, y: e.clientY, duration: 0.5 });
                });
            }

            const canvas = document.getElementById('neural-canvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let particles = [];
                function init() {
                    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
                    particles = [];
                    for (let i = 0; i < 40; i++) particles.push({
                        x: Math.random() * canvas.width, y: Math.random() * canvas.height,
                        size: Math.random() * 2 + 0.5, speedX: Math.random() * 0.4 - 0.2, speedY: Math.random() * 0.4 - 0.2
                    });
                }
                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = 'rgba(0, 255, 136, 0.4)';
                    particles.forEach(p => {
                        p.x += p.speedX; p.y += p.speedY;
                        if (p.x > canvas.width) p.x = 0; if (p.x < 0) p.x = canvas.width;
                        if (p.y > canvas.height) p.y = 0; if (p.y < 0) p.y = canvas.height;
                        ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2); ctx.fill();
                    });
                    requestAnimationFrame(animate);
                }
                init(); animate();
                window.addEventListener('resize', init);
            }
        });
    </script>
</body>

</html>